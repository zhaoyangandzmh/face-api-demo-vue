import{d as e,I as a,r as l,K as t,$ as s,w as u,i as o,h as i,g as c,N as n,z as v,O as r,P as d,o as p,k as m,Q as f,V as b}from"./vendor.51cee63a.js";/* empty css              *//* empty css              */import{_ as g}from"./test.b5925835.js";import{_ as h}from"./UploadButton.vue_vue&type=script&setup=true&lang.d580cfdf.js";import{f as j}from"./index.5070ea57.js";import{n as w,l as F,M as _,T as y,S as x}from"./FaceMatcher.9cf7eaf3.js";import{m as T,r as U}from"./resizeResults.7ec8b892.js";import{d as R}from"./drawDetections.4fc2c34e.js";import"./drawFaceExpressions.5723c421.js";import"./fetchImage.05f71b13.js";import"./detectFaces.dcb5ab79.js";r("data-v-7bce17e2");const S={class:"video_face_detector"},k=m(" 视频控制： "),z=m(" 更换视频： "),C=m(" 检测人脸： "),D=m(" 选择算法模型 "),L={class:"see"};d();var M=e({setup(e){const r=a("loading"),d=l(),m=l("detectSingleFace"),M=l("tinyFaceDetector"),I=l({}),O=["ssdMobilenetv1","tinyFaceDetector","mtcnn"],A=l(),B=[{label:"可信单",value:"detectSingleFace"},{label:"模糊多",value:"detectAllFaces"}],E=l(),K=l(),N=async()=>{var e,a;if(null==(e=E.value)?void 0:e.paused)return clearTimeout(A.value);const l=await j[m.value](E.value,I.value);if(l&&!(null==(a=E.value)?void 0:a.paused)){const e=T(K.value,E.value,!0),a=U(l,e);R(K.value,a)}else K.value.getContext("2d").clearRect(0,0,K.value.width,K.value.height);A.value=setTimeout((()=>N()),20)},P=()=>{var e;(null==(e=E.value)?void 0:e.paused)?(E.value.play(),setTimeout((()=>N()),300)):E.value.pause()},Q=async()=>{switch(r.startLoading("模块资源加载中"),await w[M.value].loadFromUri("/models"),await F("/models"),r.stopLoading(),M.value){case"ssdMobilenetv1":I.value=new x({minConfidence:.5});break;case"tinyFaceDetector":I.value=new y({inputSize:512,scoreThreshold:.5});break;case"mtcnn":I.value=new _({minFaceSize:20,scaleFactor:.709})}};return t(Q),s((()=>{var e;null==(e=E.value)||e.pause(),clearTimeout(A.value)})),u(d,(async e=>{e.length&&(E.value.pause(),setTimeout((()=>{K.value.getContext("2d").clearRect(0,0,K.value.width,K.value.height),E.value.src=URL.createObjectURL(e[0])}),300))})),u(M,Q),(e,a)=>{const l=f,t=b,s=v;return p(),o("div",S,[i(s,null,{default:c((()=>[i(l,null,{default:c((()=>[k,n("button",{onClick:P},"暂停Or播放")])),_:1}),i(l,null,{default:c((()=>[z,i(h,{"file-list":d.value,"onUpdate:file-list":a[0]||(a[0]=e=>d.value=e),accept:"video/mp4, video/ogg, video/webm"},null,8,["file-list"])])),_:1}),i(l,null,{default:c((()=>[C,i(t,{options:B,value:m.value,"onUpdate:value":a[1]||(a[1]=e=>m.value=e)},null,8,["value"])])),_:1}),i(l,null,{default:c((()=>[D,i(t,{options:O,value:M.value,"onUpdate:value":a[2]||(a[2]=e=>M.value=e)},null,8,["value"])])),_:1})])),_:1}),n("div",L,[n("video",{ref:E,src:g,muted:"",playsinline:""},null,512),n("canvas",{ref:K},null,512)])])}}});M.__scopeId="data-v-7bce17e2";export{M as default};
