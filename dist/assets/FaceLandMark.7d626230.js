import{d as a,I as e,r as s,K as t,w as l,i as n,h as c,g as i,N as o,F as u,z as r,O as d,P as v,o as m,k as p,Q as f,A as b,V as h}from"./vendor.23c62718.js";/* empty css              *//* empty css              *//* empty css              */import{_ as w}from"./shl.75cfabae.js";import{_ as g}from"./UploadButton.vue_vue&type=script&setup=true&lang.5a821b96.js";import{n as j,l as F,M as _,T as y,S as k,d as x,b as M}from"./FaceMatcher.9cf7eaf3.js";import{d as U}from"./drawDetections.4fc2c34e.js";import{m as z,r as D}from"./resizeResults.7ec8b892.js";import{d as L}from"./detectFaces.dcb5ab79.js";d("data-v-999b7b3a");const S=p(" 更换图片： "),C=p(" 边框Or面部轮廓 "),I=p(" 选择算法模型 "),O={class:"see"};v();var R=a({setup(a){const d=e("loading"),v=s([]),p=s(!1),R=s("ssdMobilenetv1"),T=s({}),A=s(),B=s(),K=["ssdMobilenetv1","tinyFaceDetector","mtcnn"],N=async()=>{switch(d.startLoading("模块资源加载中"),await j[R.value].loadFromUri("/models"),await F("/models"),d.stopLoading(),R.value){case"ssdMobilenetv1":T.value=new k({minConfidence:.5});break;case"tinyFaceDetector":T.value=new y({inputSize:512,scoreThreshold:.5});break;case"mtcnn":T.value=new _({minFaceSize:20,scaleFactor:.709})}},P=async()=>{const a=await L(A.value,T.value).withFaceLandmarks();z(B.value,A.value);const e=D(a,A.value);p.value?x(B.value,e):U(B.value,e)};return t((async()=>{await N(),P()})),l(R,(async()=>{await N(),P()})),l(v,(async a=>{if(!a.length)return;const e=await M(a[0]);A.value.src=e.src,B.value.getContext("2d").clearRect(0,0,B.value.width,B.value.height),P()})),l(p,P),(a,e)=>{const s=f,t=b,l=h,d=r;return m(),n(u,null,[c(d,null,{default:i((()=>[c(s,null,{default:i((()=>[S,c(g,{"file-list":v.value,"onUpdate:file-list":e[0]||(e[0]=a=>v.value=a),accept:"image/png, image/jpeg"},null,8,["file-list"])])),_:1}),c(s,null,{default:i((()=>[C,c(t,{checked:p.value,"onUpdate:checked":e[1]||(e[1]=a=>p.value=a)},null,8,["checked"])])),_:1}),c(s,null,{default:i((()=>[I,c(l,{options:K,value:R.value,"onUpdate:value":e[2]||(e[2]=a=>R.value=a)},null,8,["value"])])),_:1})])),_:1}),o("div",O,[o("img",{ref:A,src:w},null,512),o("canvas",{ref:B},null,512)])],64)}}});R.__scopeId="data-v-999b7b3a";export{R as default};
