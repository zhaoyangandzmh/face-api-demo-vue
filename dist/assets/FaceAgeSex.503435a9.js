import{d as e,I as a,r as s,K as t,w as l,i as n,h as c,g as o,N as i,F as r,z as d,O as u,P as v,o as m,k as f,Q as p,A as g,V as w}from"./vendor.51cee63a.js";/* empty css              *//* empty css              *//* empty css              */import{_ as h}from"./UploadButton.vue_vue&type=script&setup=true&lang.d580cfdf.js";import{n as b,l as j,s as y,M as F,T as _,S as k,q as M,d as x,b as U}from"./FaceMatcher.9cf7eaf3.js";import{d as z}from"./drawDetections.4fc2c34e.js";import{m as L,r as A}from"./resizeResults.7ec8b892.js";import{d as D}from"./detectFaces.dcb5ab79.js";u("data-v-8c686174");const S=f(" 更换图片： "),$=f(" 边框Or面部轮廓 "),C=f(" 选择算法模型 "),I={class:"see"};v();var O=e({setup(e){const u=a("loading"),v=s([]),f=s(!1),O=s("ssdMobilenetv1"),P=s({}),R=s(),T=s(),q=["ssdMobilenetv1","tinyFaceDetector","mtcnn"],B=async()=>{switch(u.startLoading("模块资源加载中"),await b[O.value].loadFromUri("/models"),await j("/models"),await y("/models"),u.stopLoading(),O.value){case"ssdMobilenetv1":P.value=new k({minConfidence:.5});break;case"tinyFaceDetector":P.value=new _({inputSize:512,scoreThreshold:.5});break;case"mtcnn":P.value=new F({minFaceSize:20,scaleFactor:.709})}},E=async()=>{const e=await D(R.value,P.value).withFaceLandmarks().withAgeAndGender();L(T.value,R.value);const a=A(e,R.value);a.forEach((e=>{const{age:a,gender:s,genderProbability:t}=e;new M([`${Math.round(a)} years`,`${s} (${Math.round(t)})`],e.detection.box.bottomLeft).draw(T.value)})),f.value?x(T.value,a):z(T.value,a)};return t((async()=>{await B(),E()})),l(O,(async()=>{await B(),E()})),l(v,(async e=>{if(!e.length)return;const a=await U(e[0]);R.value.src=a.src,T.value.getContext("2d").clearRect(0,0,T.value.width,T.value.height),E()})),l(f,E),(e,a)=>{const s=p,t=g,l=w,u=d;return m(),n(r,null,[c(u,null,{default:o((()=>[c(s,null,{default:o((()=>[S,c(h,{"file-list":v.value,"onUpdate:file-list":a[0]||(a[0]=e=>v.value=e),accept:"image/png, image/jpeg"},null,8,["file-list"])])),_:1}),c(s,null,{default:o((()=>[$,c(t,{checked:f.value,"onUpdate:checked":a[1]||(a[1]=e=>f.value=e)},null,8,["checked"])])),_:1}),c(s,null,{default:o((()=>[C,c(l,{options:q,value:O.value,"onUpdate:value":a[2]||(a[2]=e=>O.value=e)},null,8,["value"])])),_:1})])),_:1}),i("div",I,[i("img",{ref:R,src:"/assets/smile.f3c1e093.jpeg"},null,512),i("canvas",{ref:T},null,512)])],64)}}});O.__scopeId="data-v-8c686174";export{O as default};
