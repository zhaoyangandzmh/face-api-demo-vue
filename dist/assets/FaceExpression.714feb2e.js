import{d as a,I as e,r as s,K as t,w as l,i as n,h as c,g as i,N as o,F as r,z as u,O as d,P as v,o as m,k as p,Q as f,A as w,V as g}from"./vendor.23c62718.js";/* empty css              *//* empty css              *//* empty css              */import{_ as h}from"./UploadButton.vue_vue&type=script&setup=true&lang.5a821b96.js";import{n as b,l as j,m as F,M as y,T as _,S as k,d as x,b as M}from"./FaceMatcher.9cf7eaf3.js";import{d as U}from"./drawDetections.4fc2c34e.js";import{d as z}from"./drawFaceExpressions.5723c421.js";import{m as D,r as L}from"./resizeResults.7ec8b892.js";import{d as S}from"./detectFaces.dcb5ab79.js";d("data-v-0896b38e");const C=p(" 更换图片： "),E=p(" 边框Or面部轮廓 "),I=p(" 选择算法模型 "),O={class:"see"};v();var R=a({setup(a){const d=e("loading"),v=s([]),p=s(!1),R=s("ssdMobilenetv1"),T=s({}),A=s(),B=s(),K=["ssdMobilenetv1","tinyFaceDetector","mtcnn"],N=async()=>{switch(d.startLoading("模块资源加载中"),await b[R.value].loadFromUri("/models"),await j("/models"),await F("/models"),d.stopLoading(),R.value){case"ssdMobilenetv1":T.value=new k({minConfidence:.5});break;case"tinyFaceDetector":T.value=new _({inputSize:512,scoreThreshold:.5});break;case"mtcnn":T.value=new y({minFaceSize:20,scaleFactor:.709})}},P=async()=>{const a=await S(A.value,T.value).withFaceLandmarks().withFaceExpressions();D(B.value,A.value);const e=L(a,A.value);p.value?x(B.value,e):U(B.value,e),z(B.value,e,.05)};return t((async()=>{await N(),P()})),l(R,(async()=>{await N(),P()})),l(v,(async a=>{if(!a.length)return;const e=await M(a[0]);A.value.src=e.src,B.value.getContext("2d").clearRect(0,0,B.value.width,B.value.height),P()})),l(p,P),(a,e)=>{const s=f,t=w,l=g,d=u;return m(),n(r,null,[c(d,null,{default:i((()=>[c(s,null,{default:i((()=>[C,c(h,{"file-list":v.value,"onUpdate:file-list":e[0]||(e[0]=a=>v.value=a),accept:"image/png, image/jpeg"},null,8,["file-list"])])),_:1}),c(s,null,{default:i((()=>[E,c(t,{checked:p.value,"onUpdate:checked":e[1]||(e[1]=a=>p.value=a)},null,8,["checked"])])),_:1}),c(s,null,{default:i((()=>[I,c(l,{options:K,value:R.value,"onUpdate:value":e[2]||(e[2]=a=>R.value=a)},null,8,["value"])])),_:1})])),_:1}),o("div",O,[o("img",{ref:A,src:"/assets/smile_my.2819d3f6.jpeg"},null,512),o("canvas",{ref:B},null,512)])],64)}}});R.__scopeId="data-v-0896b38e";export{R as default};
